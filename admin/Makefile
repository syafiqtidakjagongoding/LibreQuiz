# =======================================
# Makefile untuk Maven Project Java
# =======================================

APP_NAME = quizmath_sma_admin-1.0-SNAPSHOT.jar
TARGET_DIR = target
MAIN_CLASS = main.Main

# Default goal kalau cuma ketik "make"
.DEFAULT_GOAL := run

# =======================================
# Perintah utama
# =======================================

# Build project (tanpa test)
build:
	@echo "ğŸ§± Building project..."
	mvn clean package -DskipTests

# Jalankan hasil build (.jar)
run: build
	@echo "ğŸš€ Menjalankan aplikasi..."
	java -jar $(TARGET_DIR)/$(APP_NAME)

# Jalankan langsung via Maven (tanpa bikin .jar)
dev:
	@echo "âš™ï¸  Development mode (exec:java)"
	mvn compile exec:java -Dexec.mainClass=$(MAIN_CLASS)

# Bersihkan hasil build
clean:
	@echo "ğŸ§¹ Membersihkan project..."
	mvn clean

# Jalankan ulang: clean + build + run
rebuild:
	@echo "ğŸ” Rebuilding project..."
	mvn clean package -DskipTests
	java -jar $(TARGET_DIR)/$(APP_NAME)
